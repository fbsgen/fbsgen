modules = fbs, raw, transpile_pb, transpile_fbs, h, batch

# the package of the proto will be included (as a dir) in the outputDir
#global_options = with_package_dir

fbs.source = proto
fbs.output = test/simple.html
fbs.output_dir = target/test_proto/fbs

raw.source = proto
raw.output = test/simple.html
raw.output_dir = target/test_proto/raw
raw.options = raw

transpile_pb.source = proto
transpile_pb.output = fbsgen/transpile.proto
transpile_pb.output_dir = target/test_proto/transpile

transpile_fbs.source = proto
transpile_fbs.output = fbsgen/transpile.fbs
transpile_fbs.output_dir = target/test_proto/transpile

h.source = proto
h.output = fbsgen/$_generated.h
h.output_dir = target/test_proto/h

batch.source = proto
batch.output = batch
# dummy output
batch.output_dir = target
# links to _stg_active_all (The underscore prefix enables linking)
batch.options = active_stgs:_stg_active_all

_stg_active_all = test/simple.html, fbsgen/transpile.fbs, fbsgen/transpile.proto, fbsgen/$_generated.h

test/simple.html.output_dir = target/test_proto/batch
test/simple.html.options = raw

fbsgen/transpile.fbs.output_dir = target/test_proto/batch

fbsgen/transpile.proto.output_dir = target/test_proto/batch

fbsgen/$_generated.h.output_dir = target/test_proto/batch
